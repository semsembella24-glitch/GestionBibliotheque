@startuml
' Classes
class Book {
    - title: str
    - author: str
    - available: bool
    + borrow(): bool
    + return_book(): void
    + __str__(): str
}

class User {
    - name: str
    - borrowed_books: List[Book]
    + borrow_book(book: Book): bool
    + return_book(book: Book): bool
    + borrowed_books(): List[Book]
    + name(): str
}

class Loan {
    - user: User
    - book: Book
    - date: datetime
    - active: bool
    + close(): void
    + user(): User
    + book(): Book
    + date(): datetime
    + active(): bool
}

class Library {
    - books: List[Book]
    - users: List[User]
    - active_loans: List[Loan]
    + add_book(book: Book): void
    + register_user(user: User): void
    + borrow_book(user: User, book: Book): Loan
    + return_book(loan: Loan): void
    + display_status(): void
    + books(): List[Book]
    + users(): List[User]
    + active_loans(): List[Loan]
}

' Relationships
Library "1" o-- "*" Book : contains
Library "1" o-- "*" User : registers
Library "1" o-- "*" Loan : manages

User "1" --> "*" Book : borrows
Loan "1" --> "1" User : linked
Loan "1" --> "1" Book : linked

' Optional: show multiplicity on Library to Loan
Library "1" --> "*" Loan : maintains
@enduml